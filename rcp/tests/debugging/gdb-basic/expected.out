Function "__jit_debug_register_code" not defined.
Breakpoint 1 (__jit_debug_register_code) pending.
> library(rcp)

Breakpoint 1, __jit_debug_register_code () at gdb_jit.c:XXX
69	void __attribute__((noinline)) __jit_debug_register_code(void) {
[GDB] Hit JIT registration (helpers). Finishing...
gdb_jit_register (func_name=func_name@entry=0xADDR "__rcp_notinlined_helpers", code_addr=code_addr@entry=0xADDR <__rcp_notinlined_helpers>, code_size=code_size@entry=2365, inst_addrs=inst_addrs@entry=0xADDR, instruction_count=instruction_count@entry=3, stencils=<optimized out>, base_cfa_offset=8) at gdb_jit.c:XXX
1026	  __jit_debug_descriptor.action_flag = JIT_NOACTION;
>
> # Define inner function
> f_inner <- function(x) {
+   # Simple operation
+   return(x + 1)
+ }
>
> # Define outer function that calls the compiled inner function
> f_outer <- function(x) {
+   # Call the JIT-compiled inner function
+   y <- f_inner_jit(x)
+   return(y * 2)
+ }
>
> cat("Compiling inner function...\n")
Compiling inner function...
> f_inner_jit <- rcp::rcp_cmpfun(f_inner, list(name="inner_jit"))

Breakpoint 1, __jit_debug_register_code () at gdb_jit.c:XXX
69	void __attribute__((noinline)) __jit_debug_register_code(void) {
[GDB] Hit JIT registration (inner_jit). Finishing...
gdb_jit_register (func_name=func_name@entry=0xADDR "inner_jit", code_addr=code_addr@entry=0xADDR <inner_jit>, code_size=1880, inst_addrs=inst_addrs@entry=0xADDR, instruction_count=instruction_count@entry=5, stencils=<optimized out>, base_cfa_offset=72) at gdb_jit.c:XXX
1026	  __jit_debug_descriptor.action_flag = JIT_NOACTION;
Breakpoint 2 at 0xADDR: file /tmp/rcp_jit_XXXXXX/inner_jit.S, line 1.
>
> cat("Compiling outer function...\n")
Compiling outer function...
> f_outer_jit <- rcp::rcp_cmpfun(f_outer, list(name="outer_jit"))

Breakpoint 1, __jit_debug_register_code () at gdb_jit.c:XXX
69	void __attribute__((noinline)) __jit_debug_register_code(void) {
[GDB] Hit JIT registration (outer_jit). Finishing...
gdb_jit_register (func_name=func_name@entry=0xADDR "outer_jit", code_addr=code_addr@entry=0xADDR <outer_jit>, code_size=3420, inst_addrs=inst_addrs@entry=0xADDR, instruction_count=instruction_count@entry=10, stencils=<optimized out>, base_cfa_offset=72) at gdb_jit.c:XXX
1026	  __jit_debug_descriptor.action_flag = JIT_NOACTION;
Breakpoint 3 at 0xADDR: file /tmp/rcp_jit_XXXXXX/outer_jit.S, line 1.
>
> cat("Executing outer function...\n")
Executing outer function...
> # This should trigger breakpoints in GDB
> res <- f_outer_jit(10)

Breakpoint 3, outer_jit (stack=0xADDR, locals=0xADDR) at /tmp/rcp_jit_XXXXXX/outer_jit.S:1
1	_RCP_INIT
[GDB] Hit outer_jit. Initial Backtrace:
#0  outer_jit (stack=0xADDR, locals=0xADDR) at /tmp/rcp_jit_XXXXXX/outer_jit.S:1
#1  0xADDR in rcpEval (body=body@entry=0xADDR, rho=rho@entry=0xADDR) at eval.c:XXX
#2  0xADDR in Rf_eval (e=e@entry=0xADDR, rho=rho@entry=0xADDR) at eval.c:XXX
#3  0xADDR in R_execClosure (call=call@entry=0xADDR, newrho=newrho@entry=0xADDR, sysparent=<optimized out>, rho=rho@entry=0xADDR, arglist=arglist@entry=0xADDR, op=op@entry=0xADDR) at eval.c:XXX
#4  0xADDR in applyClosure_core (call=call@entry=0xADDR, op=op@entry=0xADDR, arglist=0xADDR, rho=rho@entry=0xADDR, suppliedvars=<optimized out>, unpromise=unpromise@entry=TRUE) at eval.c:XXX
[GDB] Stepping through outer_jit prologue...
0xADDR in outer_jit (stack=0xADDR, locals=0xADDR) at /tmp/rcp_jit_XXXXXX/outer_jit.S:1
1	_RCP_INIT
0xADDR	1	_RCP_INIT
0xADDR	1	_RCP_INIT
0xADDR	1	_RCP_INIT
0xADDR	1	_RCP_INIT
0xADDR	1	_RCP_INIT
0xADDR	1	_RCP_INIT
0xADDR	1	_RCP_INIT
outer_jit (stack=0xADDR, locals=0xADDR) at /tmp/rcp_jit_XXXXXX/outer_jit.S:2
2	GETFUN_OP_
[GDB] Reached bytecode in outer_jit. Instruction:
0xADDR	2	GETFUN_OP_
1: x/i $pc
=> 0xADDR <outer_jit+33>:	mov    %rsi,%rbp
#0  0xADDR in outer_jit (stack=0xADDR, locals=0xADDR) at /tmp/rcp_jit_XXXXXX/outer_jit.S:2
0xADDR	2	GETFUN_OP_
1: x/i $pc
=> 0xADDR <outer_jit+36>:	mov    (%rsi),%rsi
#0  0xADDR in outer_jit (stack=0xADDR, locals=0xADDR) at /tmp/rcp_jit_XXXXXX/outer_jit.S:2
[GDB] Continuing to inner_jit...

Breakpoint 2, inner_jit (stack=0xADDR, locals=0xADDR) at /tmp/rcp_jit_XXXXXX/inner_jit.S:1
1	_RCP_INIT
1: x/i $pc
=> 0xADDR <inner_jit>:	push   %r15
[GDB] Hit inner_jit. FULL BACKTRACE (Verify Stack):
#0  inner_jit (stack=0xADDR, locals=0xADDR) at /tmp/rcp_jit_XXXXXX/inner_jit.S:1
#1  0xADDR in rcpEval (body=<optimized out>, rho=<optimized out>) at eval.c:XXX
#2  0xADDR in __rcp_notinlined_helpers (stack=0xADDR, locals=0xADDR) at /tmp/rcp_jit_XXXXXX/__rcp_notinlined_helpers.S:2
#3  0xADDR in outer_jit (stack=0xADDR, locals=0xADDR) at /tmp/rcp_jit_XXXXXX/outer_jit.S:4
#4  0xADDR in rcpEval (body=body@entry=0xADDR, rho=rho@entry=0xADDR) at eval.c:XXX
#5  0xADDR in Rf_eval (e=e@entry=0xADDR, rho=rho@entry=0xADDR) at eval.c:XXX
#6  0xADDR in R_execClosure (call=call@entry=0xADDR, newrho=newrho@entry=0xADDR, sysparent=<optimized out>, rho=rho@entry=0xADDR, arglist=arglist@entry=0xADDR, op=op@entry=0xADDR) at eval.c:XXX
#7  0xADDR in applyClosure_core (call=call@entry=0xADDR, op=op@entry=0xADDR, arglist=0xADDR, rho=rho@entry=0xADDR, suppliedvars=<optimized out>, unpromise=unpromise@entry=TRUE) at eval.c:XXX
#8  0xADDR in Rf_applyClosure (call=0xADDR, op=0xADDR, arglist=<optimized out>, rho=0xADDR, suppliedvars=<optimized out>, unpromise=TRUE) at eval.c:XXX
#9  Rf_eval (e=0xADDR, rho=rho@entry=0xADDR) at eval.c:XXX
[GDB] Stepping through inner_jit prologue...
0xADDR in inner_jit (stack=0xADDR, locals=0xADDR) at /tmp/rcp_jit_XXXXXX/inner_jit.S:1
1	_RCP_INIT
1: x/i $pc
=> 0xADDR <inner_jit+2>:	push   %r14
0xADDR	1	_RCP_INIT
1: x/i $pc
=> 0xADDR <inner_jit+4>:	push   %r13
0xADDR	1	_RCP_INIT
1: x/i $pc
=> 0xADDR <inner_jit+6>:	push   %r12
0xADDR	1	_RCP_INIT
1: x/i $pc
=> 0xADDR <inner_jit+8>:	push   %rbp
0xADDR	1	_RCP_INIT
1: x/i $pc
=> 0xADDR <inner_jit+9>:	push   %rbx
0xADDR	1	_RCP_INIT
1: x/i $pc
=> 0xADDR <inner_jit+10>:	push   %rax
0xADDR	1	_RCP_INIT
1: x/i $pc
=> 0xADDR <inner_jit+11>:	nop
0xADDR	1	_RCP_INIT
1: x/i $pc
=> 0xADDR <inner_jit+12>:	call   0xADDR <inner_jit+32>
inner_jit (stack=0xADDR, locals=0xADDR) at /tmp/rcp_jit_XXXXXX/inner_jit.S:2
2	GETVAR_OP_
1: x/i $pc
=> 0xADDR <inner_jit+32>:	sub    $0xADDR,%rsp
[GDB] Reached bytecode in inner_jit. Instruction:
0xADDR	2	GETVAR_OP_
1: x/i $pc
=> 0xADDR <inner_jit+36>:	lea    0xADDR(%rdi),%rax
#0  0xADDR in inner_jit (stack=0xADDR, locals=0xADDR) at /tmp/rcp_jit_XXXXXX/inner_jit.S:2
> cat("Result:", res, "\n")
Result: 22
>
>

Breakpoint 1, __jit_debug_register_code () at gdb_jit.c:XXX
69	void __attribute__((noinline)) __jit_debug_register_code(void) {
1: x/i $pc
=> 0xADDR <__jit_debug_register_code>:	endbr64
